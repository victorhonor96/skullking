<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skull King Helper PRO</title>

<style>
:root{
  --bg:#0f172a;
  --card:#1e293b;
  --accent:#22c55e;
  --text:#e5e7eb;
  --muted:#94a3b8;
}

*{box-sizing:border-box;font-family:system-ui}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
}

.container{
  max-width:420px;
  margin:auto;
  padding:16px;
}

h1{
  text-align:center;
  font-size:1.4rem;
}

.section{
  background:var(--card);
  border-radius:16px;
  padding:12px;
  margin-bottom:12px;
}

label{
  font-size:.8rem;
  color:var(--muted);
}

select,button{
  width:100%;
  padding:10px;
  border-radius:12px;
  border:none;
  margin-top:6px;
  background:#020617;
  color:var(--text);
  font-size:1rem;
}

button{
  background:var(--accent);
  color:#022c22;
  font-weight:700;
}

.hand{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}

.chip{
  background:#020617;
  padding:6px 10px;
  border-radius:999px;
  font-size:.8rem;
  cursor:pointer;
}

.bet{
  font-size:3rem;
  font-weight:900;
  color:var(--accent);
  text-align:center;
}

.card{
  background:#020617;
  border-radius:12px;
  padding:10px;
  margin-top:6px;
}

.percent{
  float:right;
  color:var(--accent);
}
</style>
</head>
<body>

<div class="container">
<h1>üè¥‚Äç‚ò†Ô∏è Skull King Helper PRO</h1>

<div class="section">
<label>Jogadores</label>
<select id="players">
<option>2</option><option>3</option><option>4</option>
<option selected>5</option><option>6</option><option>7</option><option>8</option>
</select>
</div>

<div class="section">
<label>Adicionar carta</label>

<select id="type">
<option value="pirate">Pirata</option>
<option value="number">Num√©rica</option>
<option value="mermaid">Sereia</option>
<option value="escape">Bandeira</option>
<option value="skull">Skull King</option>
<option value="tigress">Tigresa</option>
<option value="kraken">Kraken</option>
<option value="whale">Baleia</option>
</select>

<select id="suit">
<option value="black">Preto (trunfo)</option>
<option value="red">Vermelho</option>
<option value="blue">Azul</option>
<option value="yellow">Amarelo</option>
</select>

<select id="value">
<script>
for(let i=1;i<=13;i++)document.write(`<option>${i}</option>`)
</script>
</select>

<button onclick="addCard()">Adicionar</button>
</div>

<div class="section">
<label>Sua m√£o (toque para remover)</label>
<div class="hand" id="hand"></div>
<button onclick="analyze()">Calcular aposta</button>
</div>

<div class="section" id="result"></div>

</div>

<script>
// ===== BARALHO =====
const deck=[];
["black","red","blue","yellow"].forEach(s=>{
  for(let i=1;i<=13;i++)deck.push({type:"number",suit:s,value:i});
});
["pirate","pirate","pirate","pirate","pirate",
 "mermaid","mermaid",
 "escape","escape","escape","escape","escape",
 "skull","tigress","kraken","whale"].forEach(t=>deck.push({type:t}));

// ===== M√ÉO =====
const hand=[];
const handDiv=document.getElementById("hand");

function addCard(){
  hand.push({
    type:type.value,
    suit:suit.value,
    value:+value.value
  });
  render();
}

function render(){
  handDiv.innerHTML="";
  hand.forEach((c,i)=>{
    const el=document.createElement("div");
    el.className="chip";
    el.textContent=desc(c);
    el.onclick=()=>{ hand.splice(i,1); render(); };
    handDiv.appendChild(el);
  });
}

// ===== REGRAS =====
function wins(a,b){
  if(a.type==="kraken"||a.type==="whale")return false;
  if(b.type==="kraken"||b.type==="whale")return false;
  if(a.type==="escape")return false;
  if(a.type==="skull"&&b.type==="mermaid")return false;
  if(a.type==="mermaid"&&b.type==="skull")return true;

  if(a.type==="number"&&b.type==="number"){
    if(a.suit==="black"&&b.suit!=="black")return true;
    if(b.suit==="black"&&a.suit!=="black")return false;
    if(a.suit===b.suit)return a.value>b.value;
    return false;
  }

  const h=["escape","number","mermaid","pirate","tigress","skull"];
  if(a.type!=="number"&&b.type!=="number")
    return h.indexOf(a.type)>h.indexOf(b.type);

  return a.type!=="number";
}

// ===== PROB BASE =====
function chance(card,players){
  let w=0;
  deck.forEach(o=>{ if(wins(card,o))w++; });
  return Math.pow(w/deck.length, players-1);
}

// ===== VI√âS HUMANO =====
function humanBias(card){
  if(card.type==="skull") return 0.25;
  if(card.type==="pirate") return 0.12;
  if(card.type==="mermaid") return 0.08;
  return 0;
}

// ===== AN√ÅLISE =====
function analyze(){
  const playersCount=+players.value;

  let sum=0;
  let hasSkull=false;
  let pirateCount=0;

  const ranked=hand.map(c=>{
    let p=chance(c,playersCount);
    p+=humanBias(c);
    if(p>1)p=1;

    if(c.type==="skull") hasSkull=true;
    if(c.type==="pirate") pirateCount++;

    sum+=p;
    return {...c,p};
  }).sort((a,b)=>b.p-a.p);

  // b√¥nus de sinergia Skull + Pirata
  if(hasSkull && pirateCount>0){
    sum+=0.2;
  }

  const bet=Math.round(sum);

  result.innerHTML=`
    <div class="bet">${bet}</div>
    <div style="text-align:center;margin-bottom:10px;">Aposta recomendada</div>
    <hr>
    ${ranked.map(c=>`
      <div class="card">
        ${desc(c)}
        <span class="percent">${(c.p*100).toFixed(0)}%</span>
      </div>
    `).join("")}
  `;
}

// ===== TEXTO =====
function desc(c){
  if(c.type==="number")return `${c.value} ${c.suit}`;
  return c.type;
}
</script>

</body>
</html>
